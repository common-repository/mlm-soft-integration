var D=Object.defineProperty;var P=(e,t,s)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var i=(e,t,s)=>(P(e,typeof t!="symbol"?t+"":t,s),s);import{C as p,h as d,W as m,V as S}from"./bcd39eff.js";import{a as j,O as I}from"./9f99010c.js";import{n as _}from"../entry/index.js";import{a as T,M as C}from"./e1eaa995.js";var w=Object.defineProperty,M=Object.getOwnPropertyDescriptor,y=(e,t,s,l)=>{for(var a=l>1?void 0:l?M(t,s):t,n=e.length-1,r;n>=0;n--)(r=e[n])&&(a=(l?r(t,s,a):r(a))||a);return l&&a&&w(t,s,a),a};let v=class extends j{constructor(){super(...arguments);i(this,"loading")}};y([d({required:!1,default:!1})],v.prototype,"loading",2);v=y([p({})],v);var F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.loading?s("v-skeleton-loader",{attrs:{type:"article, actions"}}):e._t("default")],2)},H=[];const b={};var A=_(v,F,H,!1,L,null,null,null);function L(e){for(let t in b)this[t]=b[t]}var ce=function(){return A.exports}();const g=class extends T{getOrderStatuses(){return this.callHandler("get-available-order-statuses")}};let u=g;i(u,"instance",new g(C.PluginPrefix+"wc_admin_api_endpoint"));var q=Object.defineProperty,W=Object.getOwnPropertyDescriptor,k=(e,t,s,l)=>{for(var a=l>1?void 0:l?W(t,s):t,n=e.length-1,r;n>=0;n--)(r=e[n])&&(a=(l?r(t,s,a):r(a))||a);return l&&a&&q(t,s,a),a};let h=class extends I{constructor(){super(...arguments);i(this,"statusesLoading",!0);i(this,"statuses",[])}async loadStatuses(){this.statusesLoading=!0,this.statuses=[];const t=await u.instance.getOrderStatuses(),s=Object.keys(t);for(let l=0;l<s.length;l++){const a=s[l];this.statuses.push({label:t[a],value:a})}this.statusesLoading=!1}async created(){this.setInternalOption(),await this.loadStatuses()}changeHandler(){this.changeOption()}};h=k([p({})],h);var R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-select",{attrs:{items:e.statuses,"item-text":"label","item-value":"value",loading:e.statusesLoading,label:e.label,hint:e.hint},on:{change:e.changeHandler},model:{value:e.optionInternal.value.value,callback:function(l){e.$set(e.optionInternal.value,"value",l)},expression:"optionInternal.value.value"}})},E=[];const $={};var B=_(h,R,E,!1,V,null,null,null);function V(e){for(let t in $)this[t]=$[t]}var de=function(){return B.exports}(),z=Object.defineProperty,K=Object.getOwnPropertyDescriptor,G=(e,t,s,l)=>{for(var a=l>1?void 0:l?K(t,s):t,n=e.length-1,r;n>=0;n--)(r=e[n])&&(a=(l?r(t,s,a):r(a))||a);return l&&a&&z(t,s,a),a};let f=class extends I{constructor(){super(...arguments);i(this,"sponsorFields",[{label:"ID",value:"id"},{label:"Referral code",value:"ref_code"}])}async created(){this.setInternalOption()}changeHandler(){this.changeOption()}};f=G([p({})],f);var J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-select",{attrs:{items:e.sponsorFields,"item-text":"label","item-value":"value",label:e.label,hint:e.hint},on:{change:e.changeHandler},model:{value:e.optionInternal.value.value,callback:function(l){e.$set(e.optionInternal.value,"value",l)},expression:"optionInternal.value.value"}})},N=[];const x={};var Q=_(f,J,N,!1,U,null,null,null);function U(e){for(let t in x)this[t]=x[t]}var ue=function(){return Q.exports}(),X=Object.defineProperty,Y=Object.getOwnPropertyDescriptor,c=(e,t,s,l)=>{for(var a=l>1?void 0:l?Y(t,s):t,n=e.length-1,r;n>=0;n--)(r=e[n])&&(a=(l?r(t,s,a):r(a))||a);return l&&a&&X(t,s,a),a};let o=class extends S{constructor(){super(...arguments);i(this,"headers");i(this,"items");i(this,"defaultItem");i(this,"loading");i(this,"title");i(this,"internalHeaders",[]);i(this,"propertyTypes",[]);i(this,"editedIndex",-1);i(this,"editedItem",{});i(this,"dialog",!1);i(this,"dialogDelete",!1)}setFields(){this.editedItem=Object.assign({},this.defaultItem),this.internalHeaders=[...this.headers.map(t=>(t.slot="item."+t.value,t)),{text:this.$t("crudTable.actions"),value:"actions",slot:"item.action",sortable:!1}]}editItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0}deleteItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0}deleteItemConfirm(){this.items.splice(this.editedIndex,1),this.closeDelete()}close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.$emit("change",this.items),this.editedIndex=-1})}closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.$emit("change",this.items),this.editedIndex=-1})}save(){this.editedIndex>-1?Object.assign(this.items[this.editedIndex],this.editedItem):this.items.push(this.editedItem),this.close()}async saveHandler(){this.$emit("save",this.items)}mounted(){this.setFields()}get formTitle(){return this.editedIndex===-1?this.$t("crudTable.formTitleCreate").toString():this.$t("crudTable.formTitleEdit").toString()}dialogWatch(t){t||this.close()}dialogDeleteWatch(t){t||this.closeDelete()}};c([d({required:!0,type:Array})],o.prototype,"headers",2);c([d({required:!0,type:Array})],o.prototype,"items",2);c([d({required:!0,type:Object})],o.prototype,"defaultItem",2);c([d({required:!1,default:!1})],o.prototype,"loading",2);c([d({required:!1,default:""})],o.prototype,"title",2);c([m("headers",{deep:!0})],o.prototype,"setFields",1);c([m("dialog")],o.prototype,"dialogWatch",1);c([m("dialogDelete")],o.prototype,"dialogDeleteWatch",1);o=c([p({})],o);var Z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-data-table",{attrs:{headers:e.internalHeaders,loading:e.loading,items:e.items},scopedSlots:e._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-card-title",{staticStyle:{"padding-left":"0"}},[e._v(e._s(e.title))]),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(l){var a=l.on,n=l.attrs;return[s("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",n,!1),a),[e._v(" "+e._s(e.$t("crudTable.newItem"))+" ")])]}}]),model:{value:e.dialog,callback:function(l){e.dialog=l},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),s("v-card-text",[s("v-container",[e._t("editForm",null,{editItem:e.editedItem})],2)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" "+e._s(e.$t("crudTable.cancel"))+" ")]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" "+e._s(e.$t("crudTable.save"))+" ")])],1)],1)],1),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(l){e.dialogDelete=l},expression:"dialogDelete"}},[s("v-card",[s("v-card-title",{staticClass:"text-h5"},[e._v(e._s(e.$t("crudTable.deleteConfirmation")))]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v(e._s(e.$t("crudTable.cancel")))]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v(e._s(e.$t("crudTable.delete")))]),s("v-spacer")],1)],1)],1)],1)]},proxy:!0},e._l(e.$scopedSlots,function(l,a){return{key:a,fn:function(n){return[e._t(a,null,null,n)]}}}),{key:"item.actions",fn:function(l){var a=l.item;return[s("v-btn",{attrs:{plain:""},on:{click:function(n){return e.editItem(a)}}},[e._v(e._s(e.$t("crudTable.edit")))]),s("v-btn",{attrs:{color:"error",plain:""},on:{click:function(n){return e.deleteItem(a)}}},[e._v(e._s(e.$t("crudTable.delete")))])]}}],null,!0)})},ee=[];const O={};var te=_(o,Z,ee,!1,se,null,null,null);function se(e){for(let t in O)this[t]=O[t]}var ve=function(){return te.exports}();class ae{static resolvePath(t,s,l="."){return(Array.isArray(t)?t:t.split(l)).reduce((n,r)=>n&&n[r],s).toString()}}class pe{static createMap(t,s){const l={};for(let a=0;a<t.length;a++){const n=ae.resolvePath(s,t[a]);l[n]=t[a]}return l}static createDictionary(t,s){const l={};for(let a=0;a<t.length;a++)l[t[a][s]]||(l[t[a][s]]=[]),l[t[a][s]].push(t[a]);return l}}export{pe as A,ve as C,ue as M,ce as O,u as W,de as a};
