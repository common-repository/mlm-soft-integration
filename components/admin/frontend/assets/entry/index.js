var V=Object.defineProperty;var R=(e,n,t)=>n in e?V(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var o=(e,n,t)=>(R(e,typeof n!="symbol"?n+"":n,t),t);import{V as u,a as E,F as h,L as D,W,M as L,C as S,b as M,A as F,i as B,P as A,c as H,d as C}from"../chunks/9f458cb5.js";const j=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}};j();const k={title:"MLMSoft account info",accountId:"Account ID",internalUser:"Internal user",save:"Save"},X={title:"Payment",walletTitle:"Wallet",accountTitle:"Account",paid:"Paid",notPaid:"Not paid",returnBonuses:"Return bonuses",returnBonusesNotify:"Note, after the return of bonuses the coupon will be deleted"};var q={accountInfo:k,couponEWalletInfo:X};const z={title:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E\u0431 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0435 MLMSoft",accountId:"ID \u0410\u043A\u043A\u0430\u0443\u043D\u0442\u0430",internalUser:"\u0412\u043D\u0443\u0442\u0440\u0435\u043D\u043D\u0438\u0439 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C",save:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"},K={title:"\u041E\u043F\u043B\u0430\u0442\u0430",walletTitle:"\u041A\u043E\u0448\u0435\u043B\u0435\u043A",accountTitle:"\u0410\u043A\u043A\u0430\u0443\u043D\u0442",paid:"\u041E\u043F\u043B\u0430\u0447\u0435\u043D",notPaid:"\u041D\u0435 \u043E\u043F\u043B\u0430\u0447\u0435\u043D",returnBonuses:"\u0412\u0435\u0440\u043D\u0443\u0442\u044C \u0431\u043E\u043D\u0443\u0441\u044B",returnBonusesNotify:"\u041E\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043D\u0438\u043C\u0430\u043D\u0438\u0435, \u043F\u043E\u0441\u043B\u0435 \u0432\u043E\u0437\u0432\u0440\u0430\u0442\u0430 \u0431\u043E\u043D\u0443\u0441\u043E\u0432 \u043A\u0443\u043F\u043E\u043D \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D"};var G={accountInfo:z,couponEWalletInfo:K};u.use(E);const J={en_US:q,ru_RU:G},Q=h.load(D),Y=new E({fallbackLocale:"en_US",messages:J,locale:Q.locale});class g{constructor(){o(this,"accountId",0);o(this,"internalUser",!1);o(this,"wpUserId",0)}getAlias(){return"accountInfo"}getDefaultValue(){return new g}}const w=class extends W{setAccountId(n,t){return this.callHandler("set-account-id",{accountId:n,wpUserId:t})}setInternalUser(n,t){return this.callHandler("set-wp-user-info",{userInfo:n,wpUserId:t})}};let f=w;o(f,"instance",new w(L.PluginPrefix+"user_profile_api"));var Z=Object.defineProperty,ee=Object.getOwnPropertyDescriptor,te=(e,n,t,r)=>{for(var a=r>1?void 0:r?ee(n,t):n,s=e.length-1,l;s>=0;s--)(l=e[s])&&(a=(r?l(n,t,a):l(a))||a);return r&&a&&Z(n,t,a),a};let v=class extends u{constructor(){super(...arguments);o(this,"valid",!0);o(this,"accountId",0);o(this,"wpUserId",0);o(this,"internalUser",!1);o(this,"loading",!1)}async saveHandler(){this.loading=!0;try{await f.instance.setInternalUser({accountId:this.accountId,internalUser:this.internalUser},this.wpUserId)}finally{this.loading=!1}}created(){const n=h.load(g);this.accountId=n.accountId,this.wpUserId=n.wpUserId,this.internalUser=n.internalUser}};v=te([S({})],v);var ne=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-app",[t("v-main",{attrs:{app:""}},[t("v-container",{attrs:{fluid:""}},[t("v-form",{model:{value:e.valid,callback:function(r){e.valid=r},expression:"valid"}},[t("v-card",{attrs:{outlined:""}},[t("v-card-title",[e._v(" "+e._s(e.$t("accountInfo.title"))+" ")]),t("v-card-text",[t("v-text-field",{attrs:{label:e.$t("accountInfo.accountId")},model:{value:e.accountId,callback:function(r){e.accountId=r},expression:"accountId"}}),t("v-switch",{attrs:{label:e.$t("accountInfo.internalUser")},model:{value:e.internalUser,callback:function(r){e.internalUser=r},expression:"internalUser"}})],1),t("v-card-actions",[t("v-btn",{attrs:{color:"primary",loading:e.loading,disabled:!e.valid},on:{click:e.saveHandler}},[e._v(" "+e._s(e.$t("accountInfo.save"))+" ")])],1)],1)],1)],1)],1)],1)},ae=[];function O(e,n,t,r,a,s,l,x){var i=typeof e=="function"?e.options:e;n&&(i.render=n,i.staticRenderFns=t,i._compiled=!0),r&&(i.functional=!0),s&&(i._scopeId="data-v-"+s);var d;if(l?(d=function(c){c=c||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!c&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(c=__VUE_SSR_CONTEXT__),a&&a.call(this,c),c&&c._registeredComponents&&c._registeredComponents.add(l)},i._ssrRegister=d):a&&(d=x?function(){a.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:a),d)if(i.functional){i._injectStyles=d;var N=i.render;i.render=function(T,b){return d.call(b),N(T,b)}}else{var P=i.beforeCreate;i.beforeCreate=P?[].concat(P,d):[d]}return{exports:e,options:i}}const $={};var oe=O(v,ne,ae,!1,re,null,null,null);function re(e){for(let n in $)this[n]=$[n]}var se=function(){return oe.exports}();class le{constructor(){o(this,"code");o(this,"isPaid");o(this,"wallet");o(this,"payAmount")}}class ie{constructor(){o(this,"id");o(this,"title");o(this,"alias");o(this,"currency_id")}}class I{constructor(){o(this,"coupon");o(this,"account");o(this,"redirectLink")}getAlias(){return"couponEWalletParams"}getDefaultValue(){const n=new I,t=new le;t.payAmount=10.112312312312,t.code="e-wallet-pay_1661147567",t.isPaid=!0;const r=new ie;r.id=1,r.alias="test",r.title="Test wallet",r.currency_id="RUB",t.wallet=r,n.coupon=t;const a=new F;return a.id=1,a.title="Admin",a.idValue=new M("1"),n.account=a,n}}const y=class extends W{cancelPayment(n){return this.callHandler("return-bonuses",{couponCode:n})}};let p=y;o(p,"instance",new y(L.PluginPrefix+"e_wallet_coupon_admin"));var ce=Object.defineProperty,ue=Object.getOwnPropertyDescriptor,de=(e,n,t,r)=>{for(var a=r>1?void 0:r?ue(n,t):n,s=e.length-1,l;s>=0;s--)(l=e[s])&&(a=(r?l(n,t,a):l(a))||a);return r&&a&&ce(n,t,a),a};let _=class extends u{constructor(){super(...arguments);o(this,"error","");o(this,"coupon");o(this,"account");o(this,"redirectLink","");o(this,"loading",!1)}async saveHandler(){this.loading=!0;try{await p.instance.cancelPayment(this.coupon.code),this.coupon.isPaid=!this.coupon.isPaid,this.redirectLink&&window.location.replace(this.redirectLink)}catch(n){console.error(n),this.error=n}finally{this.loading=!1}}created(){const n=h.load(I);this.coupon=n.coupon,this.account=n.account,this.redirectLink=n.redirectLink}formatNumber(n){return Number(n).toLocaleString(navigator.language?navigator.language:"en-US",{maximumFractionDigits:4,minimumFractionDigits:4})}};_=de([S({})],_);var fe=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-app",[t("v-main",{attrs:{app:""}},[t("v-container",{attrs:{fluid:""}},[e.coupon.wallet?t("v-card",{staticStyle:{"margin-bottom":"10px"},attrs:{outlined:""}},[t("v-card-title",[e._v(" "+e._s(e.$t("couponEWalletInfo.walletTitle"))+" ")]),t("v-card-text",[e._v(" "+e._s(e.coupon.wallet.title)+" ("+e._s(e.coupon.wallet.currency_id)+") ")])],1):e._e(),e.coupon.wallet?t("v-card",{staticStyle:{"margin-bottom":"10px"},attrs:{outlined:""}},[t("v-card-title",[e._v(" "+e._s(e.$t("couponEWalletInfo.accountTitle"))+" ")]),t("v-card-text",[e._v(" "+e._s(e.account.title)+" ("+e._s(e.account.idValue?e.account.idValue.presentable:e.account.id)+") ")])],1):e._e(),t("v-card",{attrs:{outlined:""}},[t("v-card-title",[e._v(" "+e._s(e.$t("couponEWalletInfo.title"))+" ")]),t("v-card-text",[e.coupon.isPaid?t("v-alert",{attrs:{border:"bottom",outlined:"",type:"success"}},[e._v(" "+e._s(e.$t("couponEWalletInfo.paid"))+" "),e.coupon.payAmount?t("span",[e._v("("+e._s(e.formatNumber(e.coupon.payAmount))+" "+e._s(e.coupon.wallet.currency_id)+")")]):e._e()]):t("v-alert",{attrs:{border:"bottom",outlined:"",type:"warning"}},[e._v(" "+e._s(e.$t("couponEWalletInfo.notPaid"))+" ")]),e.error?t("v-alert",{attrs:{color:"red",outlined:"",type:"error"}},[e._v(e._s(e.error)+" ")]):e._e()],1),t("v-card-actions",[e.coupon.isPaid?[t("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:e.saveHandler}},[e._v(" "+e._s(e.$t("couponEWalletInfo.returnBonuses"))+" ")]),t("v-chip",{staticStyle:{"margin-left":"10px"},attrs:{color:"orange",outlined:""}},[e._v(e._s(e.$t("couponEWalletInfo.returnBonusesNotify")))])]:e._e()],2)],1)],1)],1)],1)},pe=[];const U={};var ve=O(_,fe,pe,!1,_e,null,null,null);function _e(e){for(let n in U)this[n]=U[n]}var me=function(){return ve.exports}();class m{}o(m,"Components",[{name:"account-info",component:se},{name:"coupon-e-wallet-info",component:me}]);u.use(B);u.config.productionTip=!1;u.use(A);const he=H();u.use(he);u.use(C);const ge=new C({});for(let e=0;e<m.Components.length;e++){const n=m.Components[e];u.customElement(n.name,{i18n:Y,vuetify:ge,render:t=>t(n.component)})}
